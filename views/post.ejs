<%-include("partials/header.ejs") %>

<main class="container">
    <div class="row g-5">
        <div class="col-md-8">
            <h3 class="pb-4 mb-4 fst-italic border-bottom">
                Movie Review
            </h3>
    
            <article class="blog-post">
                <h2 class="blog-post-title"><%=post.name%></h2>
                <div class="rating mb-4">
                    Rating: <%= post.rating %>/10
                </div>
                <div class="col-md-6">
                    <%try{%>
                        <img src="<%=post.image%>" alt="<%=post.name%> poster" class="img-fluid bd-placeholder-img card-img-top poster" onerror="this.onerror=null;this.src='images/placeholder.png';">
                    <% } catch(error) {
                        console.log(error)
                    }%>
                </div>
                <p class="blog-post-meta"><%= new Date(post.creation_date).toString().slice(0,15) %> by <a href="#"><%=author.name%></a></p>
                <p><%=post.review%></p>
            </article>
    
            <nav class="blog-pagination" aria-label="Pagination">
                <% if (post.author == user.id){ %>
                    <a class="btn btn-outline-primary" href="/edit/<%= post.id %>">Edit</a>
                    <button class="btn btn-outline-danger" href="/delete/<%= post.id %>" tabindex="-1" data-bs-toggle="modal" data-bs-target="#deleteModal">Delete</button>
                <% } %>
            </nav>
            <% if (post.author == user.id){ %>
                <%- include("partials/deleteModal.ejs") %>
            <% } %>
    </div>
    
        <div class="col-md-4">
            <div class="position-sticky" style="top: 2rem;">
              <div class="p-4 mb-3 bg-light rounded">
                <div class="d-flex align-items-center justify-content-center">
                    <svg class="bd-placeholder-img rounded-circle" width="140" height="140" xmlns="http://www.w3.org/2000/svg" role="img" aria-label="Placeholder" preserveAspectRatio="xMidYMid slice" focusable="false"><title>Placeholder</title><rect width="100%" height="100%" fill="var(--bs-secondary-color)"></rect></svg>
                </div>
                <h4 class="fst-italic">About <%= author.name %></h4>
                <p class="mb-0"><%= author.bio %></p>
              </div>
        
              <div class="p-4">
                <h4 class="fst-italic">Archives</h4>
                <ol class="list-unstyled mb-0">
                  <li><a href="#">March 2021</a></li>
                  <li><a href="#">February 2021</a></li>
                  <li><a href="#">January 2021</a></li>
                  <li><a href="#">December 2020</a></li>
                  <li><a href="#">November 2020</a></li>
                  <li><a href="#">October 2020</a></li>
                  <li><a href="#">September 2020</a></li>
                  <li><a href="#">August 2020</a></li>
                  <li><a href="#">July 2020</a></li>
                  <li><a href="#">June 2020</a></li>
                  <li><a href="#">May 2020</a></li>
                  <li><a href="#">April 2020</a></li>
                </ol>
              </div>
            </div>
          </div>
    </div>
</main>



<%-include("partials/footer.ejs") %>